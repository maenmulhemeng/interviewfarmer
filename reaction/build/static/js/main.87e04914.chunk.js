(this.webpackJsonpreaction=this.webpackJsonpreaction||[]).push([[0],{20:function(e,t,n){e.exports=n(44)},25:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(13),r=n.n(s),c=(n(25),n(17)),o=n(3),l=n(14),u=n(15),m=n(19),f=n(16),h=n(2),d=n(18),p=n(26),b=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={users:[],selectedUSer:{files:[]}},n.getFiles=n.getFiles.bind(Object(h.a)(n)),n.chooseFile=n.chooseFile.bind(Object(h.a)(n)),n.submit=n.submit.bind(Object(h.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/users/",{method:"GET"}).then((function(e){if(e.ok)return e.json()})).then((function(t){e.setState({users:t})}))}},{key:"getFiles",value:function(e,t){var n=this;e.preventDefault(),fetch("/users/"+t+"/files").then((function(e){if(e.ok)return e.json()})).then((function(e){var a=n.state.users.find((function(e){return e.id==t})),i=Object(o.a)({},a,{files:e});n.setState({users:n.state.users.map((function(e){return e.id==t?i:e})),selectedUSer:i}),console.log(n.state.users)}))}},{key:"chooseFile",value:function(e){this.setState({file:e.target.files[0]})}},{key:"submit",value:function(e){var t=this;e.preventDefault();var n=new FormData;n.append("attachment",this.state.file);p.post("/users/"+this.state.selectedUSer.id+"/files",n,{headers:{"content-type":"multipart/form-data"}}).then((function(e){if(e){var n=[].concat(Object(c.a)(t.state.selectedUSer.files),[e.data.src]),a=Object(o.a)({},t.state.selectedUSer,{files:n});console.log(a),t.setState({selectedUSer:a})}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App"},i.a.createElement("section",{id:"farmersSection"},i.a.createElement("h2",null,"List of farmers"),i.a.createElement("ul",{id:"farmers"},this.state.users.map((function(t,n){return i.a.createElement("li",{key:n},i.a.createElement("a",{onClick:function(n){return e.getFiles(n,t.id)}},t.name))})))),i.a.createElement("section",{id:"farmerFilesSection"},i.a.createElement("h2",null,"List of files"),i.a.createElement("ul",{id:"files"},this.state.selectedUSer.files.map((function(e,t){return i.a.createElement("li",{key:t},i.a.createElement("a",{href:"images/"+e.src},e.src))}))),i.a.createElement("form",{onSubmit:function(t){return e.submit(t)},id:"farmer",method:"POST",encType:"multipart/form-data"},i.a.createElement("input",{type:"file",id:"attachment",name:"attachment",onChange:this.chooseFile}),i.a.createElement("button",{type:"submit"},"Submit Request"))))}}]),t}(i.a.Component);var v=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(b,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.87e04914.chunk.js.map